(()=>{"use strict";var e={314:(e,t,n)=>{var o=n(963),l=n(252);function a(e,t){const n=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)(n)}var r=n(744);const i={},s=(0,r.Z)(i,[["render",a]]),d=s;var u=n(201);const c={id:"public"};function p(e,t,n,o,a,r){const i=(0,l.up)("PublicNav"),s=(0,l.up)("sideNav"),d=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",c,[(0,l.Wm)(i),(0,l.Wm)(s),(0,l.Wm)(d)])}const m=e=>((0,l.dD)("data-v-5ea97297"),e=e(),(0,l.Cn)(),e),h={class:"navbar"},g={class:"dropdown"},_=m((()=>(0,l._)("a",{class:"link",href:""},"ADMIN",-1))),b={class:"dropdown-content"};function v(e,t,n,o,a,r){const i=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("nav",h,[(0,l._)("ul",null,[(0,l._)("li",null,[(0,l.Wm)(i,{class:"link",to:"/"},{default:(0,l.w5)((()=>[(0,l.Uk)("Home")])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(i,{class:"link",to:"/menu"},{default:(0,l.w5)((()=>[(0,l.Uk)("LA CARTE")])),_:1})]),(0,l._)("li",g,[_,(0,l._)("div",b,[(0,l.Wm)(i,{class:"dropdown-link",to:"/admin/dashboard"},{default:(0,l.w5)((()=>[(0,l.Uk)("Admin")])),_:1}),(0,l.Wm)(i,{class:"dropdown-link",to:"/login"},{default:(0,l.w5)((()=>[(0,l.Uk)("Login")])),_:1}),(0,l.Wm)(i,{class:"dropdown-link",to:"/signup"},{default:(0,l.w5)((()=>[(0,l.Uk)("Signup")])),_:1})])]),(0,l._)("li",null,[(0,l.Wm)(i,{class:"link",to:"/about"},{default:(0,l.w5)((()=>[(0,l.Uk)("About")])),_:1})])])])}const w={name:"PublicNav"},f=(0,r.Z)(w,[["render",v],["__scopeId","data-v-5ea97297"]]),y=f,P=e=>((0,l.dD)("data-v-1c512352"),e=e(),(0,l.Cn)(),e),k={class:"content"},U=P((()=>(0,l._)("nav",{id:"littlenavbar"},[(0,l._)("button",{id:"openNav",onclick:"toggleNav()"},"☰")],-1))),x=P((()=>(0,l._)("nav",{id:"mySidenav",class:"sidenav"},[(0,l._)("span",{class:"closebtn",onclick:"toggleNav()"},"×"),(0,l._)("div",{class:"sidenavLink"},[(0,l._)("a",{href:"index.html"},"HOME"),(0,l._)("a",{href:"carte.html?content=burgers"},"BURGERS"),(0,l._)("a",{href:"carte.html?content=tacos"},"TACOS"),(0,l._)("a",{href:"carte.html?content=wrap"},"WRAPS"),(0,l._)("a",{href:"carte.html?content=texmex"},"TEXMEX"),(0,l._)("a",{href:"carte.html?content=desserts"},"DESSERTS")])],-1))),C=[U,x];function D(e,t,n,o,a,r){return(0,l.wg)(),(0,l.iD)("div",k,C)}const I={name:"sideNav"},M=(0,r.Z)(I,[["render",D],["__scopeId","data-v-1c512352"]]),E=M,N={name:"PublicLayout",components:{PublicNav:y,sideNav:E}},S=(0,r.Z)(N,[["render",p]]),O=S,T={class:"about"},A=(0,l._)("h1",null,"This is an about page",-1),q=[A];function V(e,t){return(0,l.wg)(),(0,l.iD)("div",T,q)}const R={},z=(0,r.Z)(R,[["render",V]]),F=z;var L=n(577);const W=e=>((0,l.dD)("data-v-8a0bb9bc"),e=e(),(0,l.Cn)(),e),Z={class:"home"},H=["src"],$=W((()=>(0,l._)("div",{class:"navDown"},[(0,l._)("button",{class:"btnMobile"},"Commandez")],-1))),K={class:"section-marketing"},j={class:"container-grid"},Y={class:"banner-content"},B={class:"picture"},G=["src"],X={class:"textWrap"},J={class:"cardText"},Q={class:"card-title"},ee={class:"card-description"},te=W((()=>(0,l._)("button",{class:"btn"},"DECOUVRIR",-1)));function ne(e,t,n,o,a,r){return(0,l.wg)(),(0,l.iD)("div",Z,[(0,l._)("div",{class:"mainImage",style:(0,L.j5)({backgroundImage:a.home.imgPromo1Url})},[(0,l._)("img",{class:"bigImg",src:a.home.imgPromo1Url,alt:""},null,8,H)],4),$,(0,l._)("section",K,[(0,l._)("div",j,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.home,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"banner",key:e._id},[(0,l._)("div",Y,[(0,l._)("div",B,[(0,l._)("img",{src:e.imgPost},null,8,G)])]),(0,l._)("div",X,[(0,l._)("div",J,[(0,l._)("div",Q,(0,L.zw)(e.titlePost),1),(0,l._)("div",ee,(0,L.zw)(e.descriptionPost),1)]),te])])))),128))])])])}var oe=n(154);let le=e=>pe.post("api/auth/signup",e),ae=e=>pe.post("api/auth/login",e),re=()=>{sessionStorage.removeItem("token")},ie=e=>{sessionStorage.setItem("token",e)},se=()=>sessionStorage.getItem("token"),de=()=>{let e=sessionStorage.getItem(e);return!!e};const ue={signup:le,login:ae,logout:re,saveToken:ie,getToken:se,isLogged:de},ce=oe.Z.create({baseURL:"http://localhost:3000"});ce.interceptors.request.use((e=>(ue.isLogged&&(e.headers.Authorization="Bearer "+ue.getToken()),e))),ce.interceptors.response.use((e=>e),(e=>{401==e.response.status&&"Non autorisé"==e.response.message&&(ue.logout(),il.push("/"))}));const pe=ce;let me=()=>pe.get("/api/content"),he=e=>pe.post("/api/content",e,{headers:{"Content-Type":"multipart/form-data"}}),ge=(e,t)=>pe.patch("/api/content/"+e,t,{headers:{"Content-Type":"multipart/form-data"}});const _e={postContent:ge,getContent:me,createPost:he},be={name:"HomeView",components:{},data(){return{home:{},contents:[]}},mounted(){_e.getContent().then((e=>{this.home=e.data.home})).catch((e=>{console.log(e)}))}},ve=(0,r.Z)(be,[["render",ne],["__scopeId","data-v-8a0bb9bc"]]),we=ve,fe=e=>((0,l.dD)("data-v-44d0a656"),e=e(),(0,l.Cn)(),e),ye={class:"public"},Pe={class:"public-content"},ke={class:"section"},Ue=["onClick"],xe={id:"sectionTacos",class:"menusection"},Ce=fe((()=>(0,l._)("h1",{class:"titlesection"},"PRODUITS",-1))),De={class:"rayon",oncontextmenu:"return false;",onkeydown:"return false;",onmousedown:"return false;"},Ie={class:"pictureProduit"},Me=["onClick"],Ee=["src"],Ne={key:0,class:"infos"},Se={class:"titleandinfo"},Oe={class:"titleproduit"},Te={class:"info"},Ae={key:0,class:"prix"},qe={key:1,class:"prix"},Ve={key:1,class:"infos"},Re=fe((()=>(0,l._)("p",{class:"titleproduit"},"indisponible",-1))),ze=[Re];function Fe(e,t,n,a,r,i){return(0,l.wg)(),(0,l.iD)("div",ye,[(0,l._)("div",Pe,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchKey=e),type:"search",id:"search",placeholder:"rechercher...",autocomplete:"off"},null,512),[[o.nr,r.searchKey]]),(0,l._)("div",ke,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.categories,(e=>((0,l.wg)(),(0,l.iD)("label",{class:"switch",key:e},[(0,l._)("input",{type:"checkbox",onClick:t=>i.toggleCategory(e)},null,8,Ue),(0,l._)("span",null,(0,L.zw)(e),1)])))),128))]),(0,l._)("section",xe,[Ce,(0,l._)("div",De,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.filteredProducts,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"produit",key:e},[(0,l._)("div",Ie,[e.prixMenu?((0,l.wg)(),(0,l.iD)("img",{key:0,src:"menu.svg",onClick:e=>i.toggleMenu(t),class:(0,L.C_)({iconMenu:!0,iconMenuOff:!r.products[t].Menu})},null,10,Me)):(0,l.kq)("",!0),(0,l._)("img",{src:e.imageUrl,alt:"une photo du Tacos M",class:"imgproduit"},null,8,Ee),(0,l._)("img",{src:"boisson.png",class:(0,L.C_)({boisson:!0,boissonOut:!r.products[t].Menu})},null,2),(0,l._)("img",{src:"frite.png",class:(0,L.C_)({frite:!0,friteOut:!r.products[t].Menu})},null,2)]),e.available?((0,l.wg)(),(0,l.iD)("div",Ne,[(0,l._)("div",Se,[(0,l._)("h2",Oe,(0,L.zw)(e.nameProduct),1),(0,l._)("h3",Te,(0,L.zw)(e.descriptionProduct),1)]),r.products[t].Menu&&r.products[t].prixMenu?((0,l.wg)(),(0,l.iD)("p",Ae,(0,L.zw)(e.prixMenu.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})),1)):((0,l.wg)(),(0,l.iD)("p",qe,(0,L.zw)(e.prixProduct.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})),1))])):((0,l.wg)(),(0,l.iD)("div",Ve,ze))])))),128))])])])])}let Le=()=>pe.get("/api/products"),We=e=>pe.get("/api/products/"+e),Ze=(e,t)=>pe.patch("/api/products/"+e,t,{headers:{"Content-Type":"multipart/form-data"}}),He=e=>pe.post("/api/products/",e,{headers:{"Content-Type":"multipart/form-data"}}),$e=e=>{pe.post("/api/products",e,{headers:{"Content-Type":"multipart/form-data"}})},Ke=e=>pe["delete"]("/api/products/"+e);const je={deleteProduct:Ke,createProduct:He,getAllProducts:Le,getProduct:We,updateProduct:Ze,uploadImg:$e},Ye={name:"Menu",data(){return{products:[],selectedCategories:[],categories:["sandwichs","burger","tacos","texmex"],searchKey:"",panier:[]}},computed:{filteredProducts(){let e=[];return e=0===this.selectedCategories.length?this.products:this.products.filter((e=>this.selectedCategories.includes(e.category))),e.filter((e=>e.nameProduct.toLowerCase().includes(this.searchKey.toLowerCase())))}},methods:{toggleCategory(e){const t=this.selectedCategories.indexOf(e);-1===t?this.selectedCategories.push(e):this.selectedCategories.splice(t,1)},toggleMenu(e){this.products[e].Menu=!this.products[e].Menu}},mounted(){je.getAllProducts().then((e=>{const t=e.data.Allproduct,n=t.map((e=>e.hasOwnProperty("prixMenu")?{...e,Menu:!0}:e));this.products=n,console.log(this.products)})).catch((e=>{console.log(e)}))}},Be=(0,r.Z)(Ye,[["render",Fe],["__scopeId","data-v-44d0a656"]]),Ge=Be,Xe={class:"layout"},Je={class:"admin"};function Qe(e,t,n,o,a,r){const i=(0,l.up)("PublicNav"),s=(0,l.up)("AdminNav"),d=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",Xe,[(0,l._)("div",Je,[(0,l.Uk)("Admin Layout "),(0,l.Wm)(i),(0,l.Wm)(s),(0,l.Wm)(d)])])}const et=(0,l._)("header",null," header",-1);function tt(e,t,n,o,a,r){const i=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",null,[et,(0,l.Wm)(i,{to:"/admin/user/index"},{default:(0,l.w5)((()=>[(0,l.Uk)("Users")])),_:1}),(0,l.Uk)(" / "),(0,l.Wm)(i,{to:"/admin/user/add"},{default:(0,l.w5)((()=>[(0,l.Uk)("add")])),_:1}),(0,l.Uk)(" / "),(0,l.Wm)(i,{to:"/admin/products/index"},{default:(0,l.w5)((()=>[(0,l.Uk)("products")])),_:1}),(0,l.Uk)(" / "),(0,l.Wm)(i,{to:"/admin/products/add"},{default:(0,l.w5)((()=>[(0,l.Uk)("ajout produit")])),_:1}),(0,l.Uk)(" / "),(0,l.Wm)(i,{to:"/admin/content"},{default:(0,l.w5)((()=>[(0,l.Uk)("content")])),_:1}),(0,l.Uk)(" / "),(0,l._)("button",{onClick:t[0]||(t[0]=(...e)=>r.logout&&r.logout(...e)),class:"btn"},"Deconnexion")])}let nt=()=>pe.get("/api/users"),ot=e=>pe.get("/api/users/"+e),lt=(e,t)=>pe.patch("/api/users/"+e,t),at=e=>pe.post("/api/users/",e),rt=e=>pe["delete"]("/api/users/"+e);const it={deleteUser:rt,createUser:at,getAllUsers:nt,getUser:ot,updateUser:lt},st={name:"AdminNav",methods:{logout(){ue.logout(),this.$router.push("/")}}},dt=(0,r.Z)(st,[["render",tt]]),ut=dt,ct={name:"PublicLayout",components:{PublicNav:y,AdminNav:ut}},pt=(0,r.Z)(ct,[["render",Qe]]),mt=pt,ht={class:"admin"};function gt(e,t,n,o,a,r){const i=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",ht,[(0,l.Uk)("Dashboard Layout "),(0,l.Wm)(i)])}const _t={name:"Dashboard"},bt=(0,r.Z)(_t,[["render",gt],["__scopeId","data-v-3dad5262"]]),vt=bt,wt=e=>((0,l.dD)("data-v-c52fd6fa"),e=e(),(0,l.Cn)(),e),ft={class:"admin"},yt={class:"admin-content"},Pt=wt((()=>(0,l._)("h2",null,"Liste des Utilisateurs",-1))),kt={class:"content-wrap"},Ut={class:"btn"},xt=wt((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"ID"),(0,l._)("th",null,"Utilisateur"),(0,l._)("th",null,"Tel"),(0,l._)("th",null,"Role"),(0,l._)("th",null,"email"),(0,l._)("th",null,"OPTIONS")])],-1))),Ct=["onClick"],Dt=["onClick"];function It(e,t,n,o,a,r){const i=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",ft,[(0,l._)("div",yt,[Pt,(0,l._)("div",kt,[(0,l._)("button",Ut,[(0,l.Wm)(i,{class:"link",to:"/admin/user/add"},{default:(0,l.w5)((()=>[(0,l.Uk)("AJOUTER UN UTILISATEUR")])),_:1})])]),(0,l._)("table",null,[xt,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.users,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:e._id},[(0,l._)("td",null,(0,L.zw)("#"+t),1),(0,l._)("td",null,(0,L.zw)(e.name+e.surname),1),(0,l._)("td",null,(0,L.zw)(e.phone),1),(0,l._)("td",null,(0,L.zw)(e.role),1),(0,l._)("td",null,(0,L.zw)(e.email),1),(0,l._)("td",null,[(0,l._)("button",{onClick:t=>r.goEditUser(e._id),class:"btn"},"Modifier",8,Ct),e._id!==a.adminId?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:n=>r.goDeleteUser(e._id,t),class:"btn delete"},"Supprimer",8,Dt)):(0,l.kq)("",!0)])])))),128))])])])])}const Mt={name:"userIndex",data(){return{userLogged:"",users:[],adminId:"6409c0663d01483e0549bb2c"}},methods:{goEditUser(e){this.$router.push({name:"userEdit",params:{id:e}})},goDeleteUser(e,t){it.deleteUser(e).then((e=>{this.users.splice(t,1)})).catch((e=>console.log(e)))}},mounted(){it.getAllUsers().then((e=>{this.users=e.data.users,console.log(this.users)})).catch((e=>{console.log(e),this.$router.push("/login")}))}},Et=(0,r.Z)(Mt,[["render",It],["__scopeId","data-v-c52fd6fa"]]),Nt=Et,St={class:"admin"},Ot=(0,l._)("h2",null,"Edition Utilisateur",-1),Tt=(0,l._)("label",{for:"userName"},"ID",-1),At=(0,l._)("label",{for:"userSurname"},"ID",-1),qt=(0,l._)("label",{for:"userPhone"},"Tel",-1),Vt=(0,l._)("label",{for:"userEmail"},"Email",-1),Rt=(0,l._)("button",{type:"submit",class:"btn"},"Modifier",-1);function zt(e,t,n,a,r,i){return(0,l.wg)(),(0,l.iD)("div",St,[(0,l.Uk)((0,L.zw)(r.user.userName)+" "+(0,L.zw)(n.id)+" ",1),Ot,(0,l._)("form",{onSubmit:t[4]||(t[4]=(0,o.iM)((e=>i.editUser()),["prevent"]))},[Tt,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.user.name=e),required:""},null,512),[[o.nr,r.user.name]]),At,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>r.user.surname=e),required:""},null,512),[[o.nr,r.user.surname]]),qt,(0,l.wy)((0,l._)("input",{type:"tel",maxlength:"10",Pattern:"^0[0-9]{9}$",class:"field-long","onUpdate:modelValue":t[2]||(t[2]=e=>r.user.phone=e),required:""},null,512),[[o.nr,r.user.phone]]),Vt,(0,l.wy)((0,l._)("input",{type:"email","onUpdate:modelValue":t[3]||(t[3]=e=>r.user.email=e),required:""},null,512),[[o.nr,r.user.email]]),Rt],32)])}const Ft={name:"userEdit",props:["id"],data(){return{user:{}}},methods:{editUser(){it.updateUser(this.id,this.user).then((e=>{1==e.data.modif.acknowledged&&1==e.data.modif.matchedCount&&0==e.data.modif.modifiedCount?(console.log(e.data),console.log("aucune modif")):this.$router.push({name:"userIndex"})})).catch((e=>console.log(e)))}},mounted(){it.getUser(this.id).then((e=>{this.user=e.data.User})).catch((e=>console.log(e)))}},Lt=(0,r.Z)(Ft,[["render",zt]]),Wt=Lt,Zt=e=>((0,l.dD)("data-v-31a2e6a0"),e=e(),(0,l.Cn)(),e),Ht={class:"admin"},$t={class:"form-style-1"},Kt={key:0},jt=Zt((()=>(0,l._)("b",null,"Corriger les erreurs suivantes",-1))),Yt=Zt((()=>(0,l._)("label",null,"IDENTITE",-1))),Bt=Zt((()=>(0,l._)("label",null,"EMAIL",-1))),Gt=Zt((()=>(0,l._)("label",null,"ROLE",-1))),Xt=Zt((()=>(0,l._)("option",{value:"Manager"},"Manager",-1))),Jt=Zt((()=>(0,l._)("option",{value:"Cuisto"},"Cuisto",-1))),Qt=Zt((()=>(0,l._)("option",{value:"Caissier"},"Caissier",-1))),en=Zt((()=>(0,l._)("option",{value:"Livreur"},"Livreur",-1))),tn=[Xt,Jt,Qt,en],nn=Zt((()=>(0,l._)("label",{for:"phone"},"TELEPHONE",-1))),on=Zt((()=>(0,l._)("label",{for:"userPassword"},"mot de passe",-1))),ln=Zt((()=>(0,l._)("li",null,[(0,l._)("button",{type:"submit",class:"btn"},"CREER")],-1)));function an(e,t,n,a,r,i){return(0,l.wg)(),(0,l.iD)("div",Ht,[(0,l._)("form",{onSubmit:t[7]||(t[7]=(0,o.iM)((e=>i.addUser()),["prevent"]))},[(0,l._)("ul",$t,[r.errors.length?((0,l.wg)(),(0,l.iD)("p",Kt,[jt,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.errors,(e=>((0,l.wg)(),(0,l.iD)("li",null,(0,L.zw)(e),1)))),256))])])):(0,l.kq)("",!0),(0,l._)("li",null,[Yt,(0,l.wy)((0,l._)("input",{type:"text",name:"field1",class:"field-divided",placeholder:"Nom","onUpdate:modelValue":t[0]||(t[0]=e=>r.user.name=e),required:""},null,512),[[o.nr,r.user.name]]),(0,l.Uk)(),(0,l.wy)((0,l._)("input",{type:"text",name:"field2",class:"field-divided",placeholder:"Prénom","onUpdate:modelValue":t[1]||(t[1]=e=>r.user.surname=e),required:""},null,512),[[o.nr,r.user.surname]])]),(0,l._)("li",null,[Bt,(0,l.wy)((0,l._)("input",{type:"email",name:"field3",class:"field-long",placeholder:"email@exemple.com","onUpdate:modelValue":t[2]||(t[2]=e=>r.user.email=e),required:""},null,512),[[o.nr,r.user.email]])]),(0,l._)("li",null,[Gt,(0,l.wy)((0,l._)("select",{name:"field4",class:"field-select","onUpdate:modelValue":t[3]||(t[3]=e=>r.user.role=e),required:""},tn,512),[[o.bM,r.user.role]])]),(0,l._)("li",null,[nn,(0,l.wy)((0,l._)("input",{type:"text",name:"field5",maxlength:"10",Pattern:"^0[0-9]{9}$",placeholder:"0607080910",class:"field-long","onUpdate:modelValue":t[4]||(t[4]=e=>r.user.phone=e),required:""},null,512),[[o.nr,r.user.phone]])]),(0,l._)("li",null,[on,(0,l.wy)((0,l._)("input",{type:"password",name:"field6",placeholder:"Minimum 6 caractères",class:"field-long","onUpdate:modelValue":t[5]||(t[5]=e=>r.user.password=e),required:""},null,512),[[o.nr,r.user.password]])]),(0,l._)("li",null,[(0,l.wy)((0,l._)("input",{type:"password",name:"field7",placeholder:"Retapez le mot de passe",class:"field-long","onUpdate:modelValue":t[6]||(t[6]=e=>r.confirmPassword=e),required:""},null,512),[[o.nr,r.confirmPassword]])]),ln,(0,l.Uk)(" "+(0,L.zw)(this.user.phone),1)])],32)])}const rn={name:"userAdd",data(){return{user:{name:"",surname:"",role:"",phone:"",email:"",password:""},confirmPassword:"",errors:[]}},methods:{addUser(){this.errors=[],this.user.password!=this.confirmPassword&&this.errors.push("le mot de passe doit correspondre"),this.user.password.length<6&&this.errors.push("le mot de passe doit contenir au moins 6 caractères"),0==this.errors.length&&it.createUser(this.user).then((e=>{console.log(e.data),this.$router.push({name:"userIndex"})})).catch((e=>console.log(e)))}}},sn=(0,r.Z)(rn,[["render",an],["__scopeId","data-v-31a2e6a0"]]),dn=sn,un=e=>((0,l.dD)("data-v-36623adb"),e=e(),(0,l.Cn)(),e),cn={class:"admin"},pn={class:"admin-content"},mn=un((()=>(0,l._)("h2",null,"Liste des Produits",-1))),hn=un((()=>(0,l._)("div",{class:"content-wrap"},null,-1))),gn=un((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"index"),(0,l._)("th",null,"NOM"),(0,l._)("th",null,"DESCRIPTION"),(0,l._)("th",null,"IMAGE"),(0,l._)("th",null,"PRIX"),(0,l._)("th",null,"DISPO"),(0,l._)("th",null,"OPTIONS")])],-1))),_n=["src"],bn={class:"caseBtn"},vn=["onClick"],wn=["onClick"];function fn(e,t,n,o,a,r){return(0,l.wg)(),(0,l.iD)("div",cn,[(0,l._)("div",pn,[mn,hn,(0,l._)("table",null,[gn,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.products,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:e._id},[(0,l._)("td",null,(0,L.zw)("#"+t),1),(0,l._)("td",null,(0,L.zw)(e.nameProduct),1),(0,l._)("td",null,(0,L.zw)(e.descriptionProduct),1),(0,l._)("td",null,[(0,l._)("img",{src:e.imageUrl,class:"vignette"},null,8,_n)]),(0,l._)("td",null,(0,L.zw)(e.prixProduct.toLocaleString("fr-FR",{style:"currency",currency:"EUR"})),1),(0,l._)("td",null,[(0,l._)("div",{class:(0,L.C_)(e.available?"circle green":"circle red")},null,2)]),(0,l._)("td",null,[(0,l._)("div",bn,[(0,l._)("button",{onClick:t=>r.goEditProduct(e._id),class:"btn"},"Modifier",8,vn),(0,l._)("button",{onClick:n=>r.goDeleteProduct(e._id,t),class:"btn delete"},"Supprimer",8,wn)])])])))),128))])])])])}const yn={name:"productIndex",data(){return{products:[]}},methods:{goEditProduct(e){this.$router.push({name:"productEdit",params:{id:e}})},goDeleteProduct(e,t){je.deleteProduct(e).then((e=>{console.log(e.data.message),this.products.splice(t,1)})).catch((e=>console.log(e)))}},mounted(){je.getAllProducts().then((e=>{this.products=e.data.Allproduct})).catch((e=>{console.log(e)}))}},Pn=(0,r.Z)(yn,[["render",fn],["__scopeId","data-v-36623adb"]]),kn=Pn,Un=e=>((0,l.dD)("data-v-6b16e0f6"),e=e(),(0,l.Cn)(),e),xn={class:"admin"},Cn={class:"form-style-1"},Dn={key:0},In=Un((()=>(0,l._)("b",null,"Corriger les erreurs suivantes",-1))),Mn=Un((()=>(0,l._)("label",{for:"nom"},"Nom du Produit",-1))),En=Un((()=>(0,l._)("label",{for:"description"},"description",-1))),Nn=Un((()=>(0,l._)("label",{for:"prixProduit"},"Prix",-1))),Sn=Un((()=>(0,l._)("label",{for:"prixMenu"},"Prix en Menu:",-1))),On=Un((()=>(0,l._)("label",null,"CATEGORIE",-1))),Tn=Un((()=>(0,l._)("option",{value:"burger"},"BURGER",-1))),An=Un((()=>(0,l._)("option",{value:"tacos"},"TACOS",-1))),qn=Un((()=>(0,l._)("option",{value:"sandwichs"},"SANDWICHS",-1))),Vn=Un((()=>(0,l._)("option",{value:"texmex"},"TEXMEX",-1))),Rn=[Tn,An,qn,Vn],zn={class:"switch"},Fn=Un((()=>(0,l._)("span",{class:"slider round"},null,-1))),Ln=Un((()=>(0,l._)("li",null,[(0,l._)("button",{type:"submit",class:"btn"},"CREER")],-1)));function Wn(e,t,n,a,r,i){return(0,l.wg)(),(0,l.iD)("div",xn,[(0,l._)("form",{enctype:"multipart/form-data",onSubmit:t[7]||(t[7]=(0,o.iM)((e=>i.addProduct()),["prevent"]))},[(0,l._)("ul",Cn,[r.errors.length?((0,l.wg)(),(0,l.iD)("p",Dn,[In,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.errors,(e=>((0,l.wg)(),(0,l.iD)("li",null,(0,L.zw)(e),1)))),256))])])):(0,l.kq)("",!0),(0,l._)("li",null,[Mn,(0,l.wy)((0,l._)("input",{type:"text",name:"nom",class:"field-divided",placeholder:"Nom","onUpdate:modelValue":t[0]||(t[0]=e=>r.product.nameProduct=e),required:""},null,512),[[o.nr,r.product.nameProduct]])]),(0,l._)("li",null,[En,(0,l.wy)((0,l._)("input",{type:"text",name:"description",class:"field-long",placeholder:"description","onUpdate:modelValue":t[1]||(t[1]=e=>r.product.descriptionProduct=e),required:""},null,512),[[o.nr,r.product.descriptionProduct]])]),(0,l._)("li",null,[Nn,(0,l.wy)((0,l._)("input",{type:"number",name:"prixProduit",step:"0.10",class:"field-long",placeholder:"en Euros",pattern:"^\\d+(\\.\\d{1,2})?$",max:"99.99","onUpdate:modelValue":t[2]||(t[2]=e=>r.product.prixProduct=e),required:""},null,512),[[o.nr,r.product.prixProduct]])]),(0,l._)("li",null,[Sn,(0,l.wy)((0,l._)("input",{type:"number",name:"prixMenu",step:"0.10",class:"field-long",placeholder:"en Euros",pattern:"^\\d+(\\.\\d{1,2})?$",max:"99.99","onUpdate:modelValue":t[3]||(t[3]=e=>r.product.prixMenu=e)},null,512),[[o.nr,r.product.prixMenu]])]),(0,l._)("li",null,[On,(0,l.wy)((0,l._)("select",{name:"field4",class:"field-select","onUpdate:modelValue":t[4]||(t[4]=e=>r.product.category=e),required:""},Rn,512),[[o.bM,r.product.category]])]),(0,l._)("label",zn,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>this.product.available=e)},null,512),[[o.e8,this.product.available]]),Fn]),(0,l.Uk)(" "+(0,L.zw)(this.product.available?"disponible":"indisponible")+" ",1),(0,l._)("li",null,[(0,l._)("input",{type:"file",onChange:t[6]||(t[6]=(...e)=>i.selectFile&&i.selectFile(...e)),required:""},null,32)]),Ln])],32)])}const Zn={name:"productAdd",data(){return{product:{nameProduct:"",descriptionProduct:"",prixProduct:null,prixMenu:null,image:null,category:"",available:!0},errors:[]}},methods:{selectFile(e){this.product.image=e.target.files[0]},addProduct(){const e=new FormData;e.append("nameProduct",this.product.nameProduct),e.append("prixProduct",this.product.prixProduct),e.append("prixMenu",this.product.prixMenu),e.append("descriptionProduct",this.product.descriptionProduct),e.append("image",this.product.image),e.append("category",this.product.category),e.append("available",this.product.available),je.createProduct(e).then((e=>{console.log(e.data),this.$router.push({name:"productIndex"})})).catch((e=>console.log(e)))}}},Hn=(0,r.Z)(Zn,[["render",Wn],["__scopeId","data-v-6b16e0f6"]]),$n=Hn,Kn=e=>((0,l.dD)("data-v-5221d967"),e=e(),(0,l.Cn)(),e),jn={class:"admin"},Yn={class:"form-style-1"},Bn={key:0},Gn=Kn((()=>(0,l._)("b",null,"Corriger les erreurs suivantes",-1))),Xn=Kn((()=>(0,l._)("label",{for:"nom"},"Nom du Produit",-1))),Jn=Kn((()=>(0,l._)("label",{for:"description'"},"description",-1))),Qn=Kn((()=>(0,l._)("label",{for:"prix"},"Prix :",-1))),eo={class:"switch"},to=Kn((()=>(0,l._)("span",{class:"slider round"},null,-1))),no=Kn((()=>(0,l._)("li",null,[(0,l._)("button",{type:"submit",class:"btn"},"MODIFIER")],-1)));function oo(e,t,n,a,r,i){return(0,l.wg)(),(0,l.iD)("div",jn,[(0,l.Uk)((0,L.zw)(n.id)+" ",1),(0,l._)("form",{enctype:"multipart/form-data",onSubmit:t[5]||(t[5]=(0,o.iM)((e=>i.editProduct()),["prevent"]))},[(0,l._)("ul",Yn,[r.errors.length?((0,l.wg)(),(0,l.iD)("p",Bn,[Gn,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.errors,(e=>((0,l.wg)(),(0,l.iD)("li",null,(0,L.zw)(e),1)))),256))])])):(0,l.kq)("",!0),(0,l._)("li",null,[Xn,(0,l.wy)((0,l._)("input",{type:"text",name:"nom",class:"field-divided",placeholder:"Nom","onUpdate:modelValue":t[0]||(t[0]=e=>r.product.nameProduct=e),required:""},null,512),[[o.nr,r.product.nameProduct]])]),(0,l._)("li",null,[Jn,(0,l.wy)((0,l._)("input",{type:"text",name:"description",class:"field-long",placeholder:"description","onUpdate:modelValue":t[1]||(t[1]=e=>r.product.descriptionProduct=e),required:""},null,512),[[o.nr,r.product.descriptionProduct]])]),(0,l._)("li",null,[Qn,(0,l.wy)((0,l._)("input",{type:"number",name:"prix",step:"0.10",class:"field-long",placeholder:"en Euros",pattern:"^\\d+(\\.\\d{1,2})?$",max:"99.99","onUpdate:modelValue":t[2]||(t[2]=e=>r.product.prixProduct=e),required:""},null,512),[[o.nr,r.product.prixProduct]])]),(0,l._)("li",null,[(0,l._)("label",eo,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>this.product.available=e)},null,512),[[o.e8,this.product.available]]),to]),(0,l.Uk)(" "+(0,L.zw)(this.product.available?"disponible":"indisponible"),1)]),(0,l._)("li",null,[(0,l._)("input",{type:"file",onChange:t[4]||(t[4]=(...e)=>i.selectFile&&i.selectFile(...e))},null,32)]),no])],32),(0,l.Uk)(" "+(0,L.zw)(this.product),1)])}const lo={name:"productEdit",props:["id"],data(){return{product:{nameProduct:"",prixProduct:null,image:null,category:"",available:!0,descriptionProduct:""},errors:[]}},methods:{selectFile(e){this.product.image=e.target.files[0]},editProduct(){const e=new FormData;e.append("nameProduct",this.product.nameProduct),e.append("prixProduct",this.product.prixProduct),e.append("descriptionProduct",this.product.descriptionProduct),e.append("image",this.product.image),e.append("category",this.product.category),e.append("available",this.product.available),je.updateProduct(this.id,e).then((e=>{1==e.data.modif.acknowledged&&1==e.data.modif.matchedCount&&0==e.data.modif.modifiedCount?console.log("aucune modif"):this.$router.push({name:"productIndex"})})).catch((e=>console.log(e)))}},mounted(){je.getProduct(this.id).then((e=>{this.product=e.data.product})).catch((e=>console.log(e)))}},ao=(0,r.Z)(lo,[["render",oo],["__scopeId","data-v-5221d967"]]),ro=ao,io=e=>((0,l.dD)("data-v-69ab4284"),e=e(),(0,l.Cn)(),e),so={class:"admin"},uo={class:"section-marketing"},co={class:"container-grid"},po=["onSubmit"],mo={class:"banner-content"},ho=["for"],go=["id","onChange"],_o={class:"picture"},bo=["src"],vo={class:"textWrap"},wo={class:"cardText"},fo=["onClick"],yo=["onUpdate:modelValue"],Po={key:0,class:"btn-textarea"},ko=["onClick"],Uo=["onClick"],xo=["onUpdate:modelValue"],Co={key:0,class:"btn-textarea"},Do=["onClick"],Io=["for"],Mo=["name","onUpdate:modelValue"],Eo=io((()=>(0,l._)("option",{value:"menu"},"DECOUVRIR",-1))),No=io((()=>(0,l._)("option",{value:"signup"},"SIGN UP",-1))),So=io((()=>(0,l._)("option",{value:"order"},"COMMANDEZ",-1))),Oo=[Eo,No,So],To=io((()=>(0,l._)("button",{type:"submit",class:"btn green"},"PUBLIER",-1)));function Ao(e,t,n,a,r,i){return(0,l.wg)(),(0,l.iD)("div",so,[(0,l._)("section",uo,[(0,l._)("div",co,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.home,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"banner",key:e._id},[(0,l._)("form",{enctype:"multipart/form-data",onSubmit:(0,o.iM)((e=>i.editPost(t)),["prevent"])},[(0,l._)("div",mo,[(0,l._)("label",{for:"changeImg"+t,class:"btn label-changeFile"},[(0,l.Uk)(" CHOISIR UNE IMAGE "),(0,l._)("input",{class:"changeFile",id:"changeImg"+t,type:"file",onChange:e=>i.selectFile1(e,t),accept:"image/png, image/jpg, image/jpeg"},null,40,go)],8,ho),(0,l._)("div",_o,[(0,l._)("img",{class:(0,L.C_)(["oldImg",{newImg:e.newFile}]),src:e.imgPost},null,10,bo)])]),(0,l._)("div",vo,[(0,l._)("div",wo,[(0,l._)("div",{class:"edit-card",onClick:e=>r.activeIndex="title"+t},[(0,l.wy)((0,l._)("textarea",{class:(0,L.C_)([{cardFocus:r.activeIndex==="title"+t},"card-title"]),type:"text",rows:"1",maxlength:"30",pattern:"[A-Za-z0-9 ]+","onUpdate:modelValue":t=>e.titlePost=t},"\n                                                ",10,yo),[[o.nr,e.titlePost]]),r.activeIndex==="title"+t?((0,l.wg)(),(0,l.iD)("div",Po,[(0,l._)("button",{class:"btn",onClick:(0,o.iM)((e=>i.cancelModif("cardTitle",t)),["stop","prevent"])},"annuler",8,ko)])):(0,l.kq)("",!0)],8,fo),(0,l._)("div",{class:"edit-card",onClick:e=>r.activeIndex="description"+t},[(0,l.wy)((0,l._)("textarea",{class:(0,L.C_)([{cardFocus:r.activeIndex==="description"+t},"card-description"]),type:"text",rows:"2",cols:"30",maxlength:"200","onUpdate:modelValue":t=>e.descriptionPost=t},"\n                                                ",10,xo),[[o.nr,e.descriptionPost]]),r.activeIndex==="description"+t?((0,l.wg)(),(0,l.iD)("div",Co,[(0,l._)("button",{class:"btn",onClick:(0,o.iM)((e=>i.cancelModif("description",t)),["stop","prevent"])},"annuler",8,Do)])):(0,l.kq)("",!0)],8,Uo)]),(0,l._)("label",{for:"optionBtn"+t},"Que fait le bouton?",8,Io),(0,l.wy)((0,l._)("select",{name:"optionBtn"+t,class:"btn","onUpdate:modelValue":t=>e.btnOption=t,required:""},Oo,8,Mo),[[o.bM,e.btnOption]]),To])],40,po)])))),128))])])])}const qo={name:"homeEdit",data(){return{home:[],originalData:[],activeIndex:null}},methods:{cancelModif(e,t){console.log(t),"cardTitle"===e&&(this.home[t].titlePost=this.originalData[t].titlePost),"description"===e&&(this.home[t].descriptionPost=this.originalData[t].descriptionPost),this.activeIndex=null},validModif(e){"description"===e&&(this.home.descriptionPost=this.description),"cardTitle"===e&&(this.home.titlePost=this.cardTitle),this.activeIndex=null},selectFile1(e,t){const n=e.target.files[0];n&&(this.home[t].imgPost=URL.createObjectURL(n),this.home[t].newFile=n)},createPost(e){const t=new FormData;t.append("titlePost",this.home[e].titlePost),t.append("descriptionPost",this.home[e].descriptionPost),this.home[e].newFile&&t.append("imgPost",this.home[e].newFile),_e.createPost(t).then((e=>{console.log(e)})).catch((e=>console.log(e)))},editPost(e){const t=new FormData;t.append("titlePost",this.home[e].titlePost),t.append("descriptionPost",this.home[e].descriptionPost),this.home[e].newFile&&t.append("imgPost",this.home[e].newFile),_e.postContent(this.home[e]._id,t).then((t=>{console.log(t),this.home[e].newFile=null})).catch((e=>console.log(e)))}},mounted(){_e.getContent().then((e=>{this.originalData=JSON.parse(JSON.stringify(e.data.home)),this.home=e.data.home})).catch((e=>{console.log(e)}))}},Vo=(0,r.Z)(qo,[["render",Ao],["__scopeId","data-v-69ab4284"]]),Ro=Vo,zo={class:"admin"},Fo=(0,l._)("h2",null,"Authentification",-1),Lo=(0,l._)("label",null,"Email:",-1),Wo=(0,l._)("label",null,"Mot de passe:",-1),Zo=(0,l._)("button",{type:"submit",class:"btn"},"Se connecter",-1);function Ho(e,t,n,a,r,i){const s=(0,l.up)("PublicNav");return(0,l.wg)(),(0,l.iD)("div",zo,[(0,l.Wm)(s),Fo,(0,l._)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>i.login&&i.login(...e)),["prevent"]))},[Lo,(0,l.wy)((0,l._)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.credentials.email=e),required:"",autocomplete:"username"},null,512),[[o.nr,r.credentials.email]]),Wo,(0,l.wy)((0,l._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.credentials.password=e),required:"",autocomplete:"current-password"},null,512),[[o.nr,r.credentials.password]]),Zo],32)])}const $o={name:"login",data(){return{credentials:{email:"",password:""}}},methods:{login(){ue.login(this.credentials).then((e=>{ue.saveToken(e.data.token),this.$router.push("/admin/dashboard")})).catch((e=>console.log(e)))}},components:{PublicNav:y}},Ko=(0,r.Z)($o,[["render",Ho]]),jo=Ko,Yo={class:"admin"},Bo=(0,l._)("h2",null,"S'inscrire",-1),Go=(0,l._)("label",null,"Username",-1),Xo=(0,l._)("label",null,"Email:",-1),Jo=(0,l._)("label",null,"Mot de passe:",-1),Qo=(0,l._)("button",{type:"submit"},"Se connecter",-1);function el(e,t,n,a,r,i){const s=(0,l.up)("PublicNav");return(0,l.wg)(),(0,l.iD)("div",Yo,[(0,l.Wm)(s),Bo,(0,l._)("form",{onSubmit:t[3]||(t[3]=(0,o.iM)(((...e)=>i.signup&&i.signup(...e)),["prevent"]))},[Go,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.credentials.userName=e),required:"",autocomplete:"usernamed"},null,512),[[o.nr,r.credentials.userName]]),Xo,(0,l.wy)((0,l._)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>r.credentials.email=e),required:""},null,512),[[o.nr,r.credentials.email]]),Jo,(0,l.wy)((0,l._)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>r.credentials.password=e),required:"",autocomplete:"current-password"},null,512),[[o.nr,r.credentials.password]]),Qo],32)])}const tl={name:"signup",data(){return{credentials:{userName:"",email:"",password:""}}},methods:{signup(){ue.signup(this.credentials).then((e=>{ue.saveToken(e.data.token),this.$router.push("/admin/dashboard")})).catch((e=>console.log(e)))}},components:{PublicNav:y}},nl=(0,r.Z)(tl,[["render",el]]),ol=nl;function ll(e){let t=sessionStorage.getItem("token");if(t)return!0;il.push("/login")}const al=[{path:"/",name:"public",component:O,children:[{path:"/",name:"home",component:we},{path:"/about",name:"about",component:F},{path:"/menu",name:"menu",component:Ge}]},{path:"/admin",name:"admin",component:mt,children:[{path:"dashboard",name:"Dashboard",component:vt,meta:{requireAuth:!0}},{path:"user/index",name:"userIndex",component:Nt,meta:{requireAuth:!0}},{path:"user/add",name:"userAdd",component:dn,meta:{requireAuth:!0}},{path:"user/edit",name:"userEdit",component:Wt,meta:{requireAuth:!0}},{path:"content",name:"homeEdit",component:Ro},{path:"user/edit/:id(\\d+)",name:"userEdit",component:Wt,props:!0,meta:{requireAuth:!0}},{path:"products/index",name:"productIndex",component:kn},{path:"products/add",name:"productAdd",component:$n},{path:"products/edit/:id(\\d+)",name:"productEdit",component:ro,props:!0},{path:"/:patchMatch(.*)*",redirect:"/admin/dashboard"}]},{path:"/signup",name:"signup",component:ol},{path:"/login",name:"login",component:jo},{path:"/:patchMatch(.*)*",redirect:"/"}],rl=(0,u.p7)({history:(0,u.PO)("/"),routes:al});rl.beforeEach(((e,t,n)=>{e.meta.requireAuth&&ll(),n()}));const il=rl;var sl=n(907);const dl=(0,sl.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});var ul=n(636),cl=n(810),pl=n(417);ul.vI.add(pl.Yai,pl.Vui),(0,o.ri)(d).use(dl).use(il).component("font-awesome-icon",cl.GN).mount("#app")}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.m=e,(()=>{var e=[];n.O=(t,o,l,a)=>{if(!o){var r=1/0;for(u=0;u<e.length;u++){for(var[o,l,a]=e[u],i=!0,s=0;s<o.length;s++)(!1&a||r>=a)&&Object.keys(n.O).every((e=>n.O[e](o[s])))?o.splice(s--,1):(i=!1,a<r&&(r=a));if(i){e.splice(u--,1);var d=l();void 0!==d&&(t=d)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,l,a]}})(),(()=>{n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={143:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var l,a,[r,i,s]=o,d=0;if(r.some((t=>0!==e[t]))){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(s)var u=s(n)}for(t&&t(o);d<r.length;d++)a=r[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},o=self["webpackChunksiteweb"]=self["webpackChunksiteweb"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[998],(()=>n(314)));o=n.O(o)})();
//# sourceMappingURL=app.31e57edc.js.map